<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>UUID生成 - By GodBiao</title>
	<style>
		body {
			background-color: #000;
			color: aqua;
		}
		
		.uuid {
			font-family: "Code";
			font-size: 40px;
			width: 80%;
			margin: 300px auto;
			text-align: center;
		}
		
		@font-face {
			font-family: Code;
			src: url("Courier New.ttf");
		}

	</style>

	<script>
		Date.prototype.Format = function(fmt) { //author: marver 
			var o = {
				"M+": this.getMonth() + 1, //月份 
				"d+": this.getDate(), //日 
				"h+": this.getHours(), //小时 
				"m+": this.getMinutes(), //分 
				"s+": this.getSeconds(), //秒 
				"q+": Math.floor((this.getMonth() + 3) / 3), //季度 
				"S": this.getMilliseconds() //毫秒 
			};
			if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
			for (var k in o)
				if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
			return fmt;
		}

		function oddNumber(num) {
			var taskTime = new Date().Format("yyyyMMddhhmmss");;
			//将数据库中最大的一条记录取出来,假如是：HL20150921105230001
			//String yd ="HL20150921105230001";
			if (num == "" || num == null) {
				num = "HL20150921105230001";
			}

			var lastNumber = num.substring(num.length - 3);
			var newNumber = (parseInt(lastNumber) + 1);
			if (newNumber.toString().length == 1) {
				newNumber = "00" + newNumber;
			}
			if (newNumber.toString().length == 2) {
				newNumber = "0" + newNumber;
			}

			var temp = "HL" + taskTime + newNumber;
			return temp;
		}

		function CGUI() {
			var uuid = document.getElementById("GUIDshow").innerHTML;
			document.getElementById("GUIDshow").innerHTML = oddNumber(uuid);
		}

	</script>
</head>

<body>
	<script>
		function uuid(len, radix) {
			var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');
			var uuid = [],
				i;
			radix = radix || chars.length;

			if (len) {
				// Compact form
				for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix];
			} else {
				// rfc4122, version 4 form
				var r;

				// rfc4122 requires these characters
				uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';
				uuid[14] = '4';

				// Fill in random data.  At i==19 set the high bits of clock sequence as
				// per rfc4122, sec. 4.1.5
				for (i = 0; i < 36; i++) {
					if (!uuid[i]) {
						r = 0 | Math.random() * 16;
						uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];
					}
				}
			}

			return uuid.join('');
		}

	</script>

	<div id="uuid" class="uuid" onclick="copyUUID()">
		<script>
			document.write(uuid().toLowerCase() + "<br>");

		</script>

	</div>
</body>

</html>
